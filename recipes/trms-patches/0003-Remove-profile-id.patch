From 6cdfb7de51a012d85f14301f963d35aaef055607 Mon Sep 17 00:00:00 2001
From: Ray Tiley <ray.tiley@trms.com>
Date: Wed, 19 May 2021 15:10:43 -0400
Subject: [PATCH 3/6] Remove profile id

---
 sys/decklink/gstdecklinksink.cpp | 30 ------------------------------
 sys/decklink/gstdecklinksink.h   |  1 -
 2 files changed, 31 deletions(-)

diff --git a/sys/decklink/gstdecklinksink.cpp b/sys/decklink/gstdecklinksink.cpp
index 48a5cdcc6..7dbed0b8a 100644
--- a/sys/decklink/gstdecklinksink.cpp
+++ b/sys/decklink/gstdecklinksink.cpp
@@ -165,7 +165,6 @@ enum
   PROP_MODE,
   PROP_DEVICE_NUMBER,
   PROP_VIDEO_FORMAT,
-  PROP_PROFILE_ID,
   PROP_TIMECODE_FORMAT,
   PROP_KEYER_MODE,
   PROP_KEYER_LEVEL,
@@ -291,29 +290,6 @@ gst_decklink_sink_class_init (GstDecklinkSinkClass * klass)
           (GParamFlags) (G_PARAM_READWRITE | G_PARAM_STATIC_STRINGS |
               G_PARAM_CONSTRUCT)));
 
-  /**
-   * GstDecklinkSink:profile
-   *
-   * Specifies decklink profile to use.
-   *
-   * Since: 1.20
-   */
-  g_object_class_install_property (gobject_class, PROP_PROFILE_ID,
-      g_param_spec_enum ("profile", "Profile",
-          "Certain DeckLink devices such as the DeckLink 8K Pro, the DeckLink "
-          "Quad 2 and the DeckLink Duo 2 support multiple profiles to "
-          "configure the capture and playback behavior of its sub-devices."
-          "For the DeckLink Duo 2 and DeckLink Quad 2, a profile is shared "
-          "between any 2 sub-devices that utilize the same connectors. For the "
-          "DeckLink 8K Pro, a profile is shared between all 4 sub-devices. Any "
-          "sub-devices that share a profile are considered to be part of the "
-          "same profile group."
-          "DeckLink Duo 2 support configuration of the duplex mode of "
-          "individual sub-devices.",
-          GST_TYPE_DECKLINK_PROFILE_ID, GST_DECKLINK_PROFILE_ID_DEFAULT,
-          (GParamFlags) (G_PARAM_READWRITE | G_PARAM_STATIC_STRINGS |
-              G_PARAM_CONSTRUCT)));
-
   g_object_class_install_property (gobject_class, PROP_TIMECODE_FORMAT,
       g_param_spec_enum ("timecode-format", "Timecode format",
           "Timecode format type to use for playback",
@@ -431,9 +407,6 @@ gst_decklink_sink_set_property (GObject * object, guint property_id,
           break;
       }
       break;
-    case PROP_PROFILE_ID:
-      self->profile_id = (GstDecklinkProfileId) g_value_get_enum (value);
-      break;
     case PROP_TIMECODE_FORMAT:
       self->timecode_format =
           gst_decklink_timecode_format_from_enum ((GstDecklinkTimecodeFormat)
@@ -484,9 +457,6 @@ gst_decklink_sink_get_property (GObject * object, guint property_id,
     case PROP_VIDEO_FORMAT:
       g_value_set_enum (value, self->video_format);
       break;
-    case PROP_PROFILE_ID:
-      g_value_set_enum (value, self->profile_id);
-      break;
     case PROP_TIMECODE_FORMAT:
       g_value_set_enum (value,
           gst_decklink_timecode_format_to_enum (self->timecode_format));
diff --git a/sys/decklink/gstdecklinksink.h b/sys/decklink/gstdecklinksink.h
index fc86024e1..73c7d7f4d 100644
--- a/sys/decklink/gstdecklinksink.h
+++ b/sys/decklink/gstdecklinksink.h
@@ -53,7 +53,6 @@ struct _GstDecklinkSink
   GstDecklinkModeEnum mode;
   gint device_number;
   GstDecklinkVideoFormat video_format;
-  GstDecklinkProfileId profile_id;
   BMDTimecodeFormat timecode_format;
   BMDKeyerMode keyer_mode;
   gint keyer_level;
-- 
2.20.1.windows.1

